package main

import (
	search "backend/Search"
	"database/sql"
	"fmt"
	"log"

	_ "github.com/lib/pq"
)

func ConnectSQL() (*sql.DB, error) {
	connStr := "postgresql://postgres:postgres@localhost:5555/hackernews?sslmode=disable"
	db, err := sql.Open("postgres", connStr)
	if err != nil {
		log.Fatal(err)
	}

	return db, err
}
func main() {
	// var oldTopIds, oldNewIds []int64
	// ch := fetcher.ConnectToRabbitmq()
	// fetcher.PeriodicFetcher(oldTopIds, oldNewIds, ch)
	db, _ := ConnectSQL()
	var emb = []float32{-0.06936532258987427, 0.05475698038935661, -0.05124333128333092, -0.06407437473535538, -0.022447235882282257, 0.01815124973654747, 0.0956355482339859, 0.03581354022026062, -0.020834965631365776, -0.1427740454673767, 0.02420911192893982, 0.010940018109977245, 0.012206412851810455, 0.0670667514204979, 0.04091635346412659, -0.07625050842761993, -0.028558099642395973, -0.024848582223057747, 0.05468005686998367, -0.12463431805372238, -0.028995342552661896, -0.024936366826295853, 0.04228102043271065, -0.008996217511594296, -0.051279135048389435, 0.027880333364009857, 0.029978878796100616, -0.054958466440439224, 0.02070470154285431, 0.03155374526977539, -0.03986535593867302, -0.06708318740129471, -0.019640497863292694, -0.021812697872519493, -0.10707603394985199, 0.015836449339985847, 0.01294915284961462, -0.05687404423952103, -0.001388087053783238, -0.014393321238458157, -0.07775933295488358, -0.0010963431559503078, -0.04161771759390831, 0.0006079068407416344, -0.05563738942146301, 0.0040680659003555775, -0.02793075516819954, 0.016976935788989067, -0.10090561956167221, 0.01600012183189392, -0.013923091813921928, -0.02172103337943554, -0.010905561968684196, -0.006071217358112335, 0.023015832528471947, 0.010182801634073257, -0.02603772096335888, -0.028086194768548012, 0.02777239866554737, 0.09423182904720306, -0.03451474383473396, -0.02072755992412567, 0.018236270174384117, 0.043775152415037155, -0.009198052808642387, 0.06460446864366531, -0.021730314940214157, 0.0016109644202515483, -0.0045758625492453575, 0.06771094352006912, -0.02650834433734417, -0.041665684431791306, 0.03855681046843529, 0.009239023551344872, -0.03789559751749039, -0.025814788416028023, -0.0764710009098053, -0.03609992563724518, -0.008754817768931389, 0.013728882186114788, 0.028623078018426895, -0.047896429896354675, -0.02095572091639042, 0.15979155898094177, -0.04973238706588745, 0.08005662262439728, -0.0031241350807249546, 0.023454919457435608, 0.12226676940917969, 0.06081387773156166, 0.057836323976516724, -0.01415656041353941, 0.06451699882745743, 0.027951160445809364, -0.00999891385436058, 0.01762801967561245, -0.003685399889945984, -0.028938736766576767, -0.02179042063653469, 0.006605399772524834, -0.007951954379677773, -0.07011522352695465, 0.07507362216711044, -0.07208425551652908, 0.06143996864557266, 0.0551554411649704, -0.009030367247760296, 0.029688267037272453, 0.13073965907096863, 0.04427437484264374, -0.020444270223379135, 0.05835897848010063, -0.04809994250535965, -0.09817054867744446, -0.06788592785596848, 0.03475404903292656, 0.0779070034623146, -0.018275411799550056, -0.05584114417433739, 0.040111836045980453, 0.11825066804885864, 0.03821312636137009, -0.02262479066848755, 0.07764790952205658, 0.10510194301605225, -0.1348779946565628, 0.02853449247777462, -7.988985624199627e-34, 0.009730776771903038, -0.02848893404006958, -0.04207374155521393, -0.014020302332937717, -0.012704436667263508, -0.019985608756542206, 0.07106407731771469, -0.002580225234851241, -0.10036466270685196, -0.022295119240880013, 0.05570218339562416, 0.0912986472249031, 0.014936570078134537, -0.01300082728266716, 0.06612861156463623, 0.07664632797241211, 0.044445332139730453, 0.020000295713543892, 0.12123087793588638, 0.0010475164745002985, 0.09879892319440842, -0.03390967845916748, 0.10115668177604675, 0.04262607544660568, 0.06988954544067383, 0.014428319409489632, -0.05833277106285095, 0.014127764850854874, 0.023783763870596886, 0.01166748907417059, 0.0261747557669878, -0.023975875228643417, -0.06176801398396492, 0.06938928365707397, 0.04851749539375305, -0.01596805453300476, -0.0797838494181633, -0.01929687149822712, -0.009115684777498245, 0.009886878542602062, 0.036599189043045044, 0.010498219169676304, -0.09825645387172699, 0.0331309475004673, 0.03750431910157204, -0.0515739731490612, -0.08624289184808731, -0.04280403256416321, 0.015552124939858913, 0.02447769232094288, -0.1198214441537857, 0.0272096935659647, -0.01577775552868843, 0.06248391419649124, -0.008167838677763939, -0.0063254935666918755, -0.01776323840022087, 0.05344810709357262, -0.000942775746807456, -0.013552194461226463, 0.03433425724506378, 0.07511268556118011, 0.017187079414725304, -0.018017638474702835, 0.010163256898522377, -0.0556831881403923, -0.031027911230921745, -0.027376817539334297, -0.01835920289158821, -0.01324358582496643, -0.006147724110633135, -0.002707585459575057, 0.04859022796154022, 0.059324540197849274, -0.11535918712615967, -0.01142739225178957, -0.03823215886950493, -0.0005080109694972634, 0.02694552019238472, -0.0019298512488603592, 0.04429406672716141, -0.01635894924402237, 0.010497220791876316, 0.08666893094778061, 0.024590659886598587, 0.011680644005537033, -0.03531799092888832, 0.024247603490948677, -0.04495910927653313, 0.07351313531398773, 0.061401307582855225, -0.07882507145404816, 0.019906552508473396, 0.020039379596710205, -0.0560319721698761, -1.0508118690824753e-33, -0.07945801317691803, -0.031993232667446136, -0.03366649150848389, 0.08274570852518082, -0.06823606789112091, -0.08327401429414749, 0.022341687232255936, 0.0431704968214035, 0.010563272051513195, 0.10399486869573593, -0.022032514214515686, 0.0735088586807251, 0.02663518860936165, -0.006202482618391514, 0.06917267292737961, 0.04819796606898308, 0.0021250436548143625, 0.008811483159661293, 0.0008726489031687379, -0.024873608723282814, -0.00452114874497056, 0.030649734660983086, -0.04221884906291962, 0.02743665687739849, -0.01713598147034645, 0.09692130982875824, 0.010648757219314575, -0.01062096655368805, -0.09400977939367294, 0.04289060831069946, 0.016997702419757843, 0.038059163838624954, -0.030380092561244965, -0.008194465190172195, 0.0843815952539444, -0.09092888981103897, 0.06310112029314041, 0.17025944590568542, 0.07373690605163574, -0.0951005071401596, 0.05866424739360809, -0.020334219560027122, 0.014500307850539684, -0.0018441765569150448, -0.04192429035902023, 0.06060446798801422, -0.0777871161699295, 0.055481649935245514, 0.0304932352155447, -0.04609902948141098, -0.0018979173619300127, 0.010040666908025742, 0.010434279218316078, -0.09467686712741852, -0.038806185126304626, -0.05229892209172249, 0.029700545594096184, -0.09694460034370422, 0.007813973352313042, 0.010491070337593555, 0.021402854472398758, -0.11233647167682648, -0.00918970350176096, 0.03732583299279213, -0.019432468339800835, -0.03442865610122681, -0.07087977230548859, 0.04513007029891014, 0.024799739941954613, -0.03852751478552818, -0.013126013800501823, -0.008043508976697922, 0.00635481858626008, 0.007483230903744698, -0.0567520447075367, -0.043337028473615646, 0.0625644326210022, -0.08618707209825516, -0.003624548437073827, 0.10687307268381119, 0.10064888745546341, 0.03185911476612091, -0.051583029329776764, -0.025400804355740547, 0.06491100043058395, -0.05369182303547859, -0.035265225917100906, 0.019011786207556725, 0.03841593116521835, 0.011820322833955288, -0.02230900339782238, 0.04508284106850624, -0.06375576555728912, 0.019154058769345284, 0.015730245038866997, -1.2711216079708265e-08, -0.026713240891695023, -0.02918713167309761, 0.01382241677492857, 0.036270059645175934, 0.036689694970846176, 0.0676867887377739, -0.050988636910915375, -0.05630306154489517, 0.03471418842673302, -0.009509519673883915, 0.03320027515292168, -0.05136062204837799, -0.011320860125124454, 0.004202337935566902, -0.02301504649221897, 0.008955330587923527, -0.10268671810626984, -0.026469988748431206, -0.004469647072255611, -0.05264024809002876, 0.01525219064205885, -0.0826878547668457, -0.015283992514014244, 0.0520888976752758, -0.0015287440037354827, -0.013408336788415909, 0.027943965047597885, 0.002691061934456229, -0.020321009680628777, -0.04313463345170021, -0.11104412376880646, -0.0026753090787678957, -0.01696058176457882, 0.07028704881668091, -0.040811214596033096, 0.009756600484251976, -0.011947168968617916, -0.018504494801163673, -0.017495492473244667, -0.00819586031138897, -0.024181924760341644, -0.0068788593634963036, -0.02549394592642784, 0.013435035943984985, -0.031702786684036255, -0.026655424386262894, 0.019992047920823097, -0.061618175357580185, 0.11557862907648087, -0.023410584777593613, 0.03184516727924347, 0.001603302313014865, -0.012558331713080406, 0.08674882352352142, -0.01939348503947258, -0.04113622009754181, -0.008368919603526592, -0.07089855521917343, 0.0006280840607360005, 0.10287592560052872, -0.09266574680805206, -0.03420991450548172, 0.03599005937576294, -0.015577113255858421}
	news, err := search.HybridSearch("GoLang Javascript Cyber Security", emb, db)
	if err != nil {
		fmt.Println(err)
	}
	fmt.Println(news)

}
